!function(t){var e={};function i(o){if(e[o])return e[o].exports;var s=e[o]={i:o,l:!1,exports:{}};return t[o].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(o,s,function(e){return t[e]}.bind(null,s));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);i(1);var o=function(){function t(t,e,i,o){var s=this;this.toggleMode=!1,this.toggleActive=!1,this.client=t,this.title=e,this.toggleMode=i,this.onClickFunction=o,this.element=document.createElement("button"),this.element.classList.add("htmlButton"),this.element.innerHTML=this.title,this.client.getParentHtmlElement().appendChild(this.element),this.element.addEventListener("click",function(t){s.onClickFunction(),s.client.deactivateButtons(),s.toggleMode&&(s.toggleActive?(s.element.classList.remove("active"),s.toggleActive=!1):(s.element.classList.add("active"),s.toggleActive=!0))})}return t.prototype.activate=function(){this.toggleMode&&!this.toggleActive&&(this.element.classList.add("active"),this.toggleActive=!0)},t.prototype.deactivate=function(){this.toggleMode&&this.toggleActive&&(this.element.classList.remove("active"),this.toggleActive=!1)},t}(),s=function(){function t(t,e){this.mouseX=0,this.mouseY=0,this.mouseIsDown=!1,this.cursorOutOfBounds=!1,this.editMode=0,this.inputElementsList=[],this.map=t,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.style.backgroundColor="gray",this.canvas.width=this.map.getWidth()*this.map.getCellSize(),this.canvas.height=this.map.getHeight()*this.map.getCellSize(),this.parentHtmlElement=e,this.init()}return t.prototype.init=function(){var e=this;this.parentHtmlElement.appendChild(this.canvas),window.addEventListener("mousemove",function(t){e.mouseX=t.clientX-e.canvas.offsetLeft,e.mouseY=t.clientY-e.canvas.offsetTop,e.mouseMove()}),window.addEventListener("click",function(t){e.click()}),window.addEventListener("mousedown",function(t){e.mouseDown()}),window.addEventListener("mouseup",function(t){e.mouseUp()}),this.inputElementsList.push(new o(this,"Delete walls",!0,function(){this.editMode=t.EDIT_MODE_EMPTY}.bind(this))),this.inputElementsList.push(new o(this,"Add walls",!0,function(){this.editMode=t.EDIT_MODE_WALKABLE}.bind(this))),this.inputElementsList.push(new o(this,"Add start node",!0,function(){this.editMode=t.EDIT_MODE_START}.bind(this))),this.inputElementsList.push(new o(this,"Add end node",!0,function(){this.editMode=t.EDIT_MODE_GOAL}.bind(this))),new o(this,"Reset grid",!1,function(){this.map.setGoalNode(null),this.map.setStartNode(null);for(var t=0;t<this.map.height;t++)for(var e=0;e<this.map.getWidth();e++){this.map.grid[t][e].setWalkable(!0)}}.bind(this)),this.inputElementsList.push(new o(this,"Next step",!1,function(){this.map.publicAStarExecuteNextStep()}.bind(this)))},t.prototype.getCtx=function(){return this.ctx},t.prototype.getParentHtmlElement=function(){return this.parentHtmlElement},t.prototype.deactivateButtons=function(){this.inputElementsList.forEach(function(t){t instanceof o&&t.deactivate()})},t.prototype.mouseMove=function(){if(this.cursorOutOfBounds=!(this.mouseX>=0&&this.mouseX<this.map.getWidth()*this.map.getCellSize()&&this.mouseY>=0&&this.mouseY<this.map.getHeight()*this.map.getCellSize()),this.cursorOutOfBounds)this.nodeFocused&&(this.nodeFocused.setHover(!1),this.nodeFocused=null);else{var t=this.map.getNodeAtPosition(Math.floor(this.mouseX/this.map.getCellSize()),Math.floor(this.mouseY/this.map.getCellSize()));t&&t!=this.nodeFocused&&(this.nodeFocused&&this.nodeFocused.setHover(!1),this.nodeFocused=t,this.nodeFocused.setHover(!0),this.mouseIsDown&&this.editNode())}},t.prototype.mouseUp=function(){this.mouseIsDown=!1},t.prototype.mouseDown=function(){this.mouseIsDown=!0,this.editNode()},t.prototype.click=function(){},t.prototype.editNode=function(){if(this.nodeFocused)switch(this.editMode){case t.EDIT_MODE_EMPTY:this.nodeFocused.setWalkable(!0);break;case t.EDIT_MODE_WALKABLE:this.nodeFocused.setWalkable(!1);break;case t.EDIT_MODE_START:this.map.setStartNode(this.nodeFocused);break;case t.EDIT_MODE_GOAL:this.map.setGoalNode(this.nodeFocused)}},t.prototype.draw=function(){for(var t=0;t<this.map.getHeight();t++)for(var e=0;e<this.map.getWidth();e++){this.map.getNodeAtPosition(e,t).draw()}},t.prototype.drawEmptyCanvas=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},t.colorStroke="#111",t.colorStrokeHover="#AAA",t.colorFillNormal="#fff",t.colorFillSolid="#161616",t.colorFillStart="#63c2ff",t.colorFillGoal="#63c2ff",t.colorFillOpen="#7fbf7f",t.colorFillClosed="#ff7f7f",t.colorTextNormal="#000",t.EDIT_MODE_EMPTY=0,t.EDIT_MODE_WALKABLE=1,t.EDIT_MODE_START=2,t.EDIT_MODE_GOAL=3,t.FONT="Courrier New",t}();function n(t,e,i,o){var s=t-i,n=e-o;return Math.sqrt(s*s+n*n)}var r=function(){function t(t,e,i,o){this.gridPosition={x:0,y:0},this.walkable=!0,this.hover=!1,this.map=t,this.gridPosition.x=e,this.gridPosition.y=i,this.walkable=o}return t.prototype.consoleLogPositionOnGrid=function(){console.log("X:"+this.gridPosition.x+" Y:"+this.gridPosition.y)},t.prototype.getGCost=function(){var t=0;return this.map.getStartNode()&&this.map.getGoalNode()&&(t=Math.floor(10*n(this.gridPosition.x,this.gridPosition.y,this.map.getStartNode().gridPosition.x,this.map.getStartNode().gridPosition.y))),t},t.prototype.getHCost=function(){var t=0;return this.map.getStartNode()&&this.map.getGoalNode()&&(t=Math.floor(10*n(this.gridPosition.x,this.gridPosition.y,this.map.getGoalNode().gridPosition.x,this.map.getGoalNode().gridPosition.y))),t},t.prototype.getFCost=function(){return this.getGCost()+this.getHCost()},t.prototype.getWalkable=function(){return this.walkable},t.prototype.getHover=function(){return this.hover},t.prototype.getGridPosition=function(){return{x:this.gridPosition.x,y:this.gridPosition.y}},t.prototype.getWorldPosition=function(){return{x:this.gridPosition.x*this.map.getCellSize(),y:this.gridPosition.y*this.map.getCellSize()}},t.prototype.setWalkable=function(t){this.isStartNode()||this.isGoalNode()||t==!this.getWalkable()&&(this.walkable=t,this.draw())},t.prototype.setHover=function(t){t==!this.getHover()&&(this.hover=t,this.draw())},t.prototype.isStartNode=function(){return this===this.map.getStartNode()},t.prototype.isGoalNode=function(){return this===this.map.getGoalNode()},t.prototype.inOpenList=function(){return this.map.getOpenList().includes(this)},t.prototype.inClosedList=function(){return this.map.getClosedList().includes(this)},t.prototype.draw=function(){if(this.map.getClient()){var t=this.map.getClient().getCtx();t.beginPath(),t.rect(this.getWorldPosition().x,this.getWorldPosition().y,this.map.getCellSize(),this.map.getCellSize()),this.getWalkable()?this.isStartNode()?t.fillStyle=s.colorFillStart:this.isGoalNode()?t.fillStyle=s.colorFillGoal:this.inOpenList()?t.fillStyle=s.colorFillOpen:this.inClosedList()?t.fillStyle=s.colorFillClosed:t.fillStyle=s.colorFillNormal:t.fillStyle=s.colorFillSolid,t.fill(),this.getHover()?t.strokeStyle=s.colorStrokeHover:t.strokeStyle=s.colorStroke,t.fillStyle=s.colorTextNormal,t.textBaseline="middle",t.textAlign="center",this.isStartNode()||this.isGoalNode()?(t.font="13px "+s.FONT,this.isStartNode()?t.fillText("Start",this.getWorldPosition().x+this.map.getCellSize()/2,this.getWorldPosition().y+this.map.getCellSize()/2):this.isGoalNode()&&t.fillText("Goal",this.getWorldPosition().x+this.map.getCellSize()/2,this.getWorldPosition().y+this.map.getCellSize()/2)):(this.inOpenList()||this.inClosedList())&&(t.font="16px "+s.FONT,t.fillText(this.getFCost().toString(),this.getWorldPosition().x+this.map.getCellSize()/2,this.getWorldPosition().y+this.map.getCellSize()/2),t.font="10px "+s.FONT,t.fillText(this.getGCost().toString(),this.getWorldPosition().x+8,this.getWorldPosition().y+8),t.fillText(this.getHCost().toString(),this.getWorldPosition().x+this.map.getCellSize()-8,this.getWorldPosition().y+8)),t.lineWidth=2,t.stroke(),t.closePath()}},t}(),l=function(){function t(t){if(this.grid=[],this.width=20,this.height=20,this.cellSize=20,this.closedList=[],this.openList=[],t.width&&(this.width=Math.floor(t.width)),t.height&&(this.height=Math.floor(t.height)),t.drawOptions){var e=t.drawOptions;e.cellSize&&(this.cellSize=Math.floor(e.cellSize))}for(var i=0;i<this.height;i++)this.grid.push([]);for(i=0;i<this.height;i++)for(var o=0;o<this.width;o++){this.grid[i][o]=new r(this,o,i,!0)}this.setStartNode(this.getNodeAtPosition(5,10)),this.setGoalNode(this.getNodeAtPosition(15,10))}return t.prototype.getNodeAtPosition=function(t,e){return this.grid[e][t]},t.prototype.getClient=function(){return this.client},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getCellSize=function(){return this.cellSize},t.prototype.getStartNode=function(){return this.startNode},t.prototype.getGoalNode=function(){return this.goalNode},t.prototype.getOpenList=function(){return this.openList},t.prototype.getClosedList=function(){return this.closedList},t.prototype.setStartNode=function(t){if(this.openList.length=0,this.closedList.length=0,!t||t.getWalkable()&&t!==this.goalNode)if(t){var e=this.startNode;this.startNode=t,e&&e.draw(),this.addNodeToOpenList(this.startNode),this.startNode.draw()}else this.startNode=null,this.client.draw()},t.prototype.setGoalNode=function(t){if(!t||t.getWalkable()&&t!==this.startNode){if(!t)return this.goalNode=null,void this.client.draw();var e=this.goalNode;this.goalNode=t,e&&e.draw(),this.goalNode.draw()}},t.prototype.appendHtmlEditorToElement=function(t){this.client=new s(this,t),this.client.draw()},t.prototype.addNodeToOpenList=function(t){this.openList.push(t)},t.prototype.addNodeToClosedList=function(t){this.closedList.push(t)},t.prototype.deleteNodeFromOpenList=function(t){var e=this.openList.indexOf(t);e>-1&&this.openList.splice(e,1)},t.prototype.moveNodeFromOpenToClosedList=function(t){this.deleteNodeFromOpenList(t),this.addNodeToClosedList(t),t.draw()},t.prototype.publicAStarExecuteNextStep=function(){var t=this;if(this.startNode&&this.goalNode&&!this.getClosedList().includes(this.getGoalNode())){var e=null;this.openList.forEach(function(i,o){(0==o||i.getFCost()<e.getFCost())&&(e=t.openList[o])});for(var i=e.getGridPosition().y-1;i<e.getGridPosition().y+2;i++)for(var o=e.getGridPosition().x-1;o<e.getGridPosition().x+2;o++)if((o!=e.getGridPosition().x||i!=e.getGridPosition().y)&&!(o<0||i<0||o>this.width||i>this.height)){var s=this.getNodeAtPosition(o,i);s==this.getGoalNode()&&console.log("Path found!!"),s.inClosedList()||s.inOpenList()||0==s.getWalkable()||(this.addNodeToOpenList(s),s.draw())}this.moveNodeFromOpenToClosedList(e)}},t}(),h={width:20,height:20,draw:!0,drawOptions:{cellSize:40}};document.addEventListener("DOMContentLoaded",function(){new l(h).appendHtmlEditorToElement(document.body)},!1)},function(t,e){}]);