!function(t){var i={};function e(o){if(i[o])return i[o].exports;var s=i[o]={i:o,l:!1,exports:{}};return t[o].call(s.exports,s,s.exports,e),s.l=!0,s.exports}e.m=t,e.c=i,e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:o})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var s in t)e.d(o,s,function(i){return t[i]}.bind(null,s));return o},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=1)}([function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAALCAYAAACzkJeoAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowODdEQjk1MkJFQUMxMUU4ODUyQ0EyMDAxQjBCOTkyNSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowODdEQjk1M0JFQUMxMUU4ODUyQ0EyMDAxQjBCOTkyNSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjA4N0RCOTUwQkVBQzExRTg4NTJDQTIwMDFCMEI5OTI1IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjA4N0RCOTUxQkVBQzExRTg4NTJDQTIwMDFCMEI5OTI1Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+925qyQAAACpJREFUeNpiYICACgYcACTxn44KmNEkjwDxTyBuh9LEGU1FCQZ8IQQQYAA2exOpEPtHRAAAAABJRU5ErkJggg=="},function(t,i,e){"use strict";e.r(i);e(2);var o=function(){function t(t,i,e,o){var s=this;this.toggleMode=!1,this.toggleActive=!1,this.client=t,this.title=i,this.toggleMode=e,this.onClickFunction=o,this.element=document.createElement("button"),this.element.classList.add("htmlButton"),this.element.innerHTML=this.title,this.client.getParentHtmlElement().appendChild(this.element),this.element.addEventListener("click",function(t){s.onClickFunction(),s.client.deactivateButtons(),s.toggleMode&&(s.toggleActive?(s.element.classList.remove("active"),s.toggleActive=!1):(s.element.classList.add("active"),s.toggleActive=!0))})}return t.prototype.activate=function(){this.toggleMode&&!this.toggleActive&&(this.element.classList.add("active"),this.toggleActive=!0)},t.prototype.deactivate=function(){this.toggleMode&&this.toggleActive&&(this.element.classList.remove("active"),this.toggleActive=!1)},t}(),s=function(){function t(t,i){this.mouseX=0,this.mouseY=0,this.mouseIsDown=!1,this.cursorOutOfBounds=!1,this.editMode=0,this.inputElementsList=[],this.map=t,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.style.backgroundColor="gray",this.canvas.width=this.map.getWidth()*this.map.getCellSize(),this.canvas.height=this.map.getHeight()*this.map.getCellSize(),this.parentHtmlElement=i,this.init()}return t.prototype.init=function(){var i=this;this.parentHtmlElement.appendChild(this.canvas),window.addEventListener("mousemove",function(t){i.mouseX=t.clientX-i.canvas.offsetLeft,i.mouseY=t.clientY-i.canvas.offsetTop,i.mouseMove()}),window.addEventListener("click",function(t){i.click()}),window.addEventListener("mousedown",function(t){i.mouseDown()}),window.addEventListener("mouseup",function(t){i.mouseUp()}),this.inputElementsList.push(new o(this,"Delete walls",!0,function(){this.editMode=t.EDIT_MODE_EMPTY}.bind(this))),this.inputElementsList.push(new o(this,"Add walls",!0,function(){this.editMode=t.EDIT_MODE_WALKABLE}.bind(this))),this.inputElementsList.push(new o(this,"Add start node",!0,function(){this.editMode=t.EDIT_MODE_START}.bind(this))),this.inputElementsList.push(new o(this,"Add goal node",!0,function(){this.editMode=t.EDIT_MODE_GOAL}.bind(this))),new o(this,"Reset grid",!1,function(){this.map.setGoalNode(null),this.map.setStartNode(null);for(var t=0;t<this.map.height;t++)for(var i=0;i<this.map.getWidth();i++){this.map.grid[t][i].setWalkable(!0)}}.bind(this)),this.inputElementsList.push(new o(this,"Next step",!1,function(){this.map.publicAStarExecuteNextStep()}.bind(this)))},t.prototype.getCtx=function(){return this.ctx},t.prototype.getParentHtmlElement=function(){return this.parentHtmlElement},t.prototype.deactivateButtons=function(){this.inputElementsList.forEach(function(t){t instanceof o&&t.deactivate()})},t.prototype.mouseMove=function(){if(this.cursorOutOfBounds=!(this.mouseX>=0&&this.mouseX<this.map.getWidth()*this.map.getCellSize()&&this.mouseY>=0&&this.mouseY<this.map.getHeight()*this.map.getCellSize()),this.cursorOutOfBounds)this.nodeFocused&&(this.nodeFocused.setHover(!1),this.nodeFocused=null);else{var t=this.map.getNodeAtPosition(Math.floor(this.mouseX/this.map.getCellSize()),Math.floor(this.mouseY/this.map.getCellSize()));t&&t!=this.nodeFocused&&(this.nodeFocused&&this.nodeFocused.setHover(!1),this.nodeFocused=t,this.nodeFocused.setHover(!0),this.mouseIsDown&&this.editNode())}},t.prototype.mouseUp=function(){this.mouseIsDown=!1},t.prototype.mouseDown=function(){this.mouseIsDown=!0,this.editNode()},t.prototype.click=function(){},t.prototype.editNode=function(){if(this.nodeFocused)switch(this.editMode){case t.EDIT_MODE_EMPTY:this.nodeFocused.setWalkable(!0);break;case t.EDIT_MODE_WALKABLE:this.nodeFocused.setWalkable(!1);break;case t.EDIT_MODE_START:this.map.setStartNode(this.nodeFocused);break;case t.EDIT_MODE_GOAL:this.map.setGoalNode(this.nodeFocused)}},t.prototype.draw=function(){for(var t=0;t<this.map.getHeight();t++)for(var i=0;i<this.map.getWidth();i++){this.map.getNodeAtPosition(i,t).draw()}},t.prototype.drawEmptyCanvas=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},t.colorStroke="#111",t.colorStrokeHover="#AAA",t.colorFillNormal="#fff",t.colorFillSolid="#161616",t.colorFillStart="#63c2ff",t.colorFillGoal="#63c2ff",t.colorFillOpen="#7fbf7f",t.colorFillClosed="#ff7f7f",t.colorFillPath="purple",t.colorTextNormal="#000",t.EDIT_MODE_EMPTY=0,t.EDIT_MODE_WALKABLE=1,t.EDIT_MODE_START=2,t.EDIT_MODE_GOAL=3,t.FONT="Courrier New",t}();function n(t,i,e,o){return Math.sqrt(Math.pow(t-e,2)+Math.pow(i-o,2))}var l=e(0),r=function(){function t(t,i,e,o){this.gridPosition={x:0,y:0},this.walkable=!0,this.hover=!1,this.displayMode=1,this.map=t,this.gridPosition.x=i,this.gridPosition.y=e,this.walkable=o}return t.prototype.consoleLogPositionOnGrid=function(){console.log("X:"+this.gridPosition.x+" Y:"+this.gridPosition.y)},t.prototype.getGCost=function(){var t=0;return this.map.getStartNode()&&this.map.getGoalNode()&&(t=Math.floor(10*n(this.gridPosition.x,this.gridPosition.y,this.map.getStartNode().gridPosition.x,this.map.getStartNode().gridPosition.y))),t},t.prototype.getHCost=function(){if(this.inClosedList()||this.inOpenList()){var t=0;return this.map.getStartNode()&&this.map.getGoalNode()&&(t=Math.floor(10*n(this.gridPosition.x,this.gridPosition.y,this.map.getGoalNode().gridPosition.x,this.map.getGoalNode().gridPosition.y))),t}return null},t.prototype.getFCost=function(){return this.inClosedList()||this.inOpenList()?this.getGCost()+this.getHCost():null},t.prototype.getWalkable=function(){return this.walkable},t.prototype.getHover=function(){return this.hover},t.prototype.getGridPosition=function(){return{x:this.gridPosition.x,y:this.gridPosition.y}},t.prototype.getWorldPosition=function(){return{x:this.gridPosition.x*this.map.getCellSize(),y:this.gridPosition.y*this.map.getCellSize()}},t.prototype.getNeighbourWithLowestFCost=function(){var t=null;console.log("_");for(var i=this.getGridPosition().y-1;i<this.getGridPosition().y+2;i++){for(var e=this.getGridPosition().x-1;e<this.getGridPosition().x+2;e++){var o,s=this.map.getNodeAtPosition(e,i);if(!(e==this.getGridPosition().x&&i==this.getGridPosition().y||e<0||i<0||e>this.map.getWidth()-1||i>this.map.getHeight()-1||0==s.getWalkable()))if(o=!t||n(this.getGridPosition().x,this.getGridPosition().y,s.getGridPosition().x,s.getGridPosition().y)<n(this.getGridPosition().x,this.getGridPosition().y,t.getGridPosition().x,t.getGridPosition().y),(!t||s.getFCost()<t.getFCost()||o)&&(t=s)===this.map.getStartNode())break}if(t===this.map.getStartNode())break}return console.log(t),t},t.prototype.setWalkable=function(t){this.isStartNode()||this.isGoalNode()||t==!this.getWalkable()&&(this.walkable=t,this.draw())},t.prototype.setHover=function(t){t==!this.getHover()&&(this.hover=t,this.draw())},t.prototype.isStartNode=function(){return this===this.map.getStartNode()},t.prototype.isGoalNode=function(){return this===this.map.getGoalNode()},t.prototype.inOpenList=function(){return this.map.getOpenList().includes(this)},t.prototype.inClosedList=function(){return this.map.getClosedList().includes(this)},t.prototype.inPathList=function(){return this.map.getPathList().includes(this)},t.prototype.draw=function(){if(this.map.getClient()){var t=this.map.getClient().getCtx();if(t.beginPath(),t.rect(this.getWorldPosition().x,this.getWorldPosition().y,this.map.getCellSize(),this.map.getCellSize()),this.getWalkable()?this.isStartNode()?t.fillStyle=s.colorFillStart:this.isGoalNode()?t.fillStyle=s.colorFillGoal:this.inPathList()?t.fillStyle=s.colorFillPath:this.inOpenList()?t.fillStyle=s.colorFillOpen:this.inClosedList()?t.fillStyle=s.colorFillClosed:t.fillStyle=s.colorFillNormal:t.fillStyle=s.colorFillSolid,t.fill(),this.getHover()?t.strokeStyle=s.colorStrokeHover:t.strokeStyle=s.colorStroke,t.fillStyle=s.colorTextNormal,t.textBaseline="middle",t.textAlign="center",this.isStartNode()||this.isGoalNode())t.font="13px "+s.FONT,this.isStartNode()?t.fillText("Start",this.getWorldPosition().x+this.map.getCellSize()/2,this.getWorldPosition().y+this.map.getCellSize()/2):this.isGoalNode()&&t.fillText("Goal",this.getWorldPosition().x+this.map.getCellSize()/2,this.getWorldPosition().y+this.map.getCellSize()/2);else switch(this.displayMode){case 0:(this.inOpenList()||this.inClosedList())&&(t.font="16px "+s.FONT,this.getFCost()&&t.fillText(this.getFCost().toString(),this.getWorldPosition().x+this.map.getCellSize()/2,this.getWorldPosition().y+this.map.getCellSize()/2),t.font="10px "+s.FONT,this.getGCost()&&t.fillText(this.getGCost().toString(),this.getWorldPosition().x+8,this.getWorldPosition().y+8),this.getHCost()&&t.fillText(this.getHCost().toString(),this.getWorldPosition().x+this.map.getCellSize()-8,this.getWorldPosition().y+8));break;case 1:t.font="12px "+s.FONT;var i=new Image;i.onload=function(){t.drawImage(i,this.getWorldPosition().x,this.getWorldPosition().y)}.bind(this),i.src=l,this.getFCost()&&t.fillText(this.getFCost().toString(),this.getWorldPosition().x+this.map.getCellSize()/2,this.getWorldPosition().y+10)}t.lineWidth=2,t.stroke(),t.closePath()}},t}(),h=function(){function t(t){if(this.grid=[],this.width=20,this.height=20,this.cellSize=20,this.closedList=[],this.openList=[],this.pathList=[],t.width&&(this.width=Math.floor(t.width)),t.height&&(this.height=Math.floor(t.height)),t.drawOptions){var i=t.drawOptions;i.cellSize&&(this.cellSize=Math.floor(i.cellSize))}for(var e=0;e<this.height;e++)this.grid.push([]);for(e=0;e<this.height;e++)for(var o=0;o<this.width;o++){this.grid[e][o]=new r(this,o,e,!0)}this.setStartNode(this.getNodeAtPosition(5,10)),this.setGoalNode(this.getNodeAtPosition(15,10))}return t.prototype.getNodeAtPosition=function(t,i){return this.grid[i][t]},t.prototype.getClient=function(){return this.client},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getCellSize=function(){return this.cellSize},t.prototype.getStartNode=function(){return this.startNode},t.prototype.getGoalNode=function(){return this.goalNode},t.prototype.getOpenList=function(){return this.openList},t.prototype.getClosedList=function(){return this.closedList},t.prototype.getPathList=function(){return this.pathList},t.prototype.setStartNode=function(t){if(this.openList.length=0,this.closedList.length=0,!t||t.getWalkable()&&t!==this.goalNode)if(t){var i=this.startNode;this.startNode=t,i&&i.draw(),this.addNodeToOpenList(this.startNode),this.startNode.draw()}else this.startNode=null,this.client.draw()},t.prototype.setGoalNode=function(t){if(!t||t.getWalkable()&&t!==this.startNode){if(!t)return this.goalNode=null,void this.client.draw();var i=this.goalNode;this.goalNode=t,i&&i.draw(),this.goalNode.draw()}},t.prototype.appendHtmlEditorToElement=function(t){this.client=new s(this,t),this.client.draw()},t.prototype.addNodeToOpenList=function(t){this.openList.push(t)},t.prototype.addNodeToClosedList=function(t){this.closedList.push(t)},t.prototype.deleteNodeFromOpenList=function(t){var i=this.openList.indexOf(t);i>-1&&this.openList.splice(i,1)},t.prototype.moveNodeFromOpenToClosedList=function(t){this.deleteNodeFromOpenList(t),this.addNodeToClosedList(t),t.draw()},t.prototype.publicAStarExecuteNextStep=function(){var t=this;if(!this.getClosedList().includes(this.getGoalNode())){if(!this.startNode||!this.goalNode)return void console.log("No start or goal node!");if(this.getClosedList().includes(this.getGoalNode()))return void console.log("The goal node has been found! No need to continue.");if(0==this.openList.length)return void console.log("No more paths to explore...");var i=null;if(this.openList.forEach(function(e,o){(0==o||e.getFCost()<i.getFCost())&&(i=t.openList[o])}),i){for(var e=i.getGridPosition().y-1;e<i.getGridPosition().y+2;e++)for(var o=i.getGridPosition().x-1;o<i.getGridPosition().x+2;o++)if((o!=i.getGridPosition().x||e!=i.getGridPosition().y)&&!(o<0||e<0||o>this.width-1||e>this.height-1)){var s=this.getNodeAtPosition(o,e),n=i.getGridPosition().x-o,l=i.getGridPosition().y-e;if(0!=l)if(-1==l){if(0!=n&&this.getNodeAtPosition(s.getGridPosition().x+n,s.getGridPosition().y+l).getWalkable())if(-1==n){if(!this.getNodeAtPosition(s.getGridPosition().x,s.getGridPosition().y-1).getWalkable()&&!this.getNodeAtPosition(s.getGridPosition().x-1,s.getGridPosition().y).getWalkable())continue}else if(1==n&&!this.getNodeAtPosition(s.getGridPosition().x,s.getGridPosition().y-1).getWalkable()&&!this.getNodeAtPosition(s.getGridPosition().x+1,s.getGridPosition().y).getWalkable())continue}else if(1==l&&0!=n)if(-1==n){if(!this.getNodeAtPosition(s.getGridPosition().x,s.getGridPosition().y+1).getWalkable()&&!this.getNodeAtPosition(s.getGridPosition().x-1,s.getGridPosition().y).getWalkable())continue}else if(1==n&&!this.getNodeAtPosition(s.getGridPosition().x,s.getGridPosition().y+1).getWalkable()&&!this.getNodeAtPosition(s.getGridPosition().x+1,s.getGridPosition().y).getWalkable())continue;s==this.getGoalNode()&&console.log("Path found!!"),s.inClosedList()||s.inOpenList()||0==s.getWalkable()||(this.addNodeToOpenList(s),s.draw())}this.moveNodeFromOpenToClosedList(i)}}},t}(),d={width:20,height:20,draw:!0,drawOptions:{cellSize:40}};document.addEventListener("DOMContentLoaded",function(){new h(d).appendHtmlEditorToElement(document.body)},!1)},function(t,i){}]);